<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>레시피북</title>
    <link rel="stylesheet" th:href="@{/dist/css/all.css}" type="text/css">
    <link rel="stylesheet" th:href="@{/dist/css/recipe.css}" type="text/css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=arrow_forward_ios" />
</head>
<body>
<div class="main-container">

    <!-- 상단 메뉴 -->
    <div class="title-container">
        <span class="logo" th:onclick="|location.href='@{/main/home}'|">위치크래프트</span>
        <button th:onclick="|location.href='@{/member/logout}'|">로그아웃</button>
    </div>

    <!-- 사이드 메뉴 -->
    <div class="main-navigation">
        <div class="menu-container">
            <span>MENU</span>
            <button th:onclick="|location.href='@{/notice/list}'|">공지사항</button>
            <button th:onclick="|location.href='@{/board/list}'|">자유게시판</button>
        </div>

        <div class="button-container">
            <button th:onclick="|location.href='@{/work/workroom}'|">공방</button>
            <button class="spBtn2" th:onclick="|location.href='@{/recipe/recipeMain}'|">레시피북</button>
            <button class="spBtn3" th:onclick="|location.href='@{/orders/purchaseList}'|">상점</button>
            <button class="spBtn4" th:onclick="|location.href='@{/quest/list}'|">의뢰받기</button>
        </div>
    </div>

    <!-- 레시피북 본문 -->
    <div class="recipe-list">
        <img src="/dist/images/책.png" alt="레시피북" class="book-image">

        <div class="book-content">

            <!-- 왼쪽 페이지 -->
            <div class="page-left">
                <div th:each="dto, status : ${list}" th:if="${status.index % 2 == 0}" class="potion-card">
                    <div class="potion-header">
                        <img th:src="@{/uploads/potion/{imageName}(imageName=${dto.potionPhoto})}" 
                             alt="포션 이미지" class="potion-img">
                        <div class="potion-info">
                            <div class="potion-name">
                                <span th:text="'Lv. ' + ${dto.potionLevel + ' '} + ${dto.potionName}"></span>
                                <div class="potion-material-tooltip">
                                    <div class="tooltip-title">재료</div>
                                    <div th:if="${ownedPotionIds.contains(dto.potionId)}">
                                        <div class="material-item">
                                            <img th:src="@{/uploads/material/{imageName}(imageName=${dto.firstMaterial.materialPhoto})}" 
                                                 alt="재료 이미지" class="material-img">
                                            <span th:text="${dto.firstMaterial.materialName + ' x 1'}"></span>
                                        </div>
                                        <div class="material-item">
                                            <img th:src="@{/uploads/material/{imageName}(imageName=${dto.secondMaterial.materialPhoto})}" 
                                                 alt="재료 이미지" class="material-img">
                                            <span th:text="${dto.secondMaterial.materialName + ' x 1'}"></span>
                                        </div>
                                    </div>
                                    <p th:unless="${ownedPotionIds.contains(dto.potionId)}">????</p>
                                </div>
                            </div>
                            <p class="potion-flavor" th:text="'맛: ' + ${dto.tasteDescription}"></p>
                        </div>
                    </div>

                    <div class="section">
                        <h3>효과</h3>
                        <pre th:text="${dto.potionDescription}"></pre>
                    </div>
                    <div class="section">
                        <h3>조합법</h3>
                        <pre th:text="${dto.potionComposition}"></pre>
                    </div>
                    <div class="section">
                        <h3>메모</h3>
                        <pre th:text="${dto.potionMemo}" style="font-style: italic;"></pre>
                    </div>
                </div>
            </div>

            <!-- 오른쪽 페이지 -->
            <div class="page-right">
                <div th:each="dto, status : ${list}" th:if="${status.index % 2 == 1}" class="potion-card">
                    <div class="potion-header">
                        <img th:src="@{/uploads/potion/{imageName}(imageName=${dto.potionPhoto})}" 
                             alt="포션 이미지" class="potion-img">
                        <div class="potion-info">
                            <div class="potion-name">
                                <span th:text="'Lv. ' + ${dto.potionLevel + ' '} + ${dto.potionName}"></span>
                                <div class="potion-material-tooltip">
                                    <div class="tooltip-title">재료</div>
                                    <div th:if="${ownedPotionIds.contains(dto.potionId)}">
                                        <div class="material-item">
                                            <img th:src="@{/uploads/material/{imageName}(imageName=${dto.firstMaterial.materialPhoto})}" 
                                                 alt="재료 이미지" class="material-img">
                                            <span th:text="${dto.firstMaterial.materialName + ' x 1'}"></span>
                                        </div>
                                        <div class="material-item">
                                            <img th:src="@{/uploads/material/{imageName}(imageName=${dto.secondMaterial.materialPhoto})}" 
                                                 alt="재료 이미지" class="material-img">
                                            <span th:text="${dto.secondMaterial.materialName + ' x 1'}"></span>
                                        </div>
                                    </div>
                                    <p th:unless="${ownedPotionIds.contains(dto.potionId)}">????</p>
                                </div>
                            </div>
                            <p class="potion-flavor" th:text="'맛: ' + ${dto.tasteDescription}"></p>
                        </div>
                    </div>

                    <div class="section">
                        <h3>효과</h3>
                        <pre th:text="${dto.potionDescription}"></pre>
                    </div>
                    <div class="section">
                        <h3>조합법</h3>
                        <pre th:text="${dto.potionComposition}"></pre>
                    </div>
                    <div class="section">
                        <h3>메모</h3>
                        <pre th:text="${dto.potionMemo}" style="font-style: italic;"></pre>
                    </div>
                </div>
            </div>

            <!-- 페이지네이션 -->
            <a class="page-btn prev"
               th:if="${page > 1}"
               th:href="@{/recipe/recipeMain(page=${page-1}, schType=${schType}, kwd=${kwd})}">←</a>

            <a class="page-btn next"
               th:if="${page < total_page}"
               th:href="@{/recipe/recipeMain(page=${page+1}, schType=${schType}, kwd=${kwd})}">→</a>

        </div>
    </div>
</div>
</body>
</html>
